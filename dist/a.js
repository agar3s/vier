!function(){function n(n,t,a){return w[n][t]*a/2}function t(){o.clearRect(-v.x,v.y,x.w,x.h),L.ag(),$.ag(),Y.ag(),Y.b(.8),L.v(Y),R.d();for(var n=y.length-1;n>=0;n--)y[n].c(),y[n].S.ag(),J%4==0&&y[n].ah(),J%2==0&&y[n].v(),(y[n].ai||y[n].del)&&y.splice(n,1);for(var n=d.length-1;n>=0;n--){var a=d[n];a.del?d.splice(n,1):(a.S.ag(),a.S.b(.8),L.v(a.S),a.d(),J%2==0&&a.S.ah())}J%8==0&&($.u(),J=0),$.c(),J%2==0&&Y.ah(),R.aj(),R.S.x>300+v.x&&R.S.x-300<L.w-x.w?(v.x-=R.S.vx,xxx=-R.S.vx):xxx=0,yyy=0,v.y-v.oY<-x.h&&R.S.y+v.oY+16*r>v.y+x.h&&R.S.vy>0?yyy=-R.S.vy:R.S.y-v.oY<v.y&&(R.S.vy<0?yyy=-R.S.vy:0==R.S.vy&&(yyy=O-R.S.y)),v.y-=yyy,O=R.S.y,o.translate(xxx,yyy),J++,requestAnimationFrame(t)}var a=document;a.get=a.getElementById;var e,i,f=a.get("c"),o=f.getContext("2d"),r=4,c=16,u=15,x={w:1024,h:720},v={x:0,y:-720,oY:250},S=(window.innerHeight-100)/x.h;f.width=x.w*S,f.height=x.h*S,o.scale(S,S),o.translate(v.x,-v.y);var y=[],h=[25,115,205,295],d=[],l=0,s={37:1,38:2,39:4,40:8,65:16,83:32,68:64,32:128};a.addEventListener("keydown",function(n){var t=n.keyCode?n.keyCode:n.which;s[t]&&(l|=s[t],n.preventDefault())}),a.addEventListener("keyup",function(n){var t=n.keyCode?n.keyCode:n.which;l&s[t]&&(l^=s[t],n.preventDefault())});var w=[[0,4,1,2],[1,0,2,4],[4,2,0,1],[2,1,4,0]],p=function(n){var t=this;t.afs=n,t.current=t.afs[0]},g="{f{g{h{i{u!$%056?@ABFORV`bcefostu~,",m='{H{I{X{Y"#$134ACEQSVacdsu~.~1~=~@~M~P~]~^~`~a',k='{I{J{Y{Z"#$134ACERSVcdsu~.~0~=~?~M~O~]~^~_~`',A='{Y{Z{i{j"#$134ACDESVWbcdqru~)~*~+~0~9~A~Q~a~b',b="{Z{[{g{h{i{j{k!#$134ACESTcesu~-~0~=~?~L~O~\\~_",D=["",'~A~>~0tqfUD2{i{h~@~=~1udVE1$#"{I{H',"B65VREA","~@~>tD2('&%{m{j{i~?~=udB651\"{J{I","~_~P~O~J~;~:~,tUB~b~a~Q~9~+~*~)uqWEA",'~`~M~?~>~=~/T2{k{[~P~J~A~;~:~0~,rdbVB1"{i{Y'],I={i:{kf:m,f:[0,0,0,0,0,0,0,0,0,1]},p:{kf:k,f:[2,3,3,2,0,-1]},r:{kf:A,f:[0,4,0,5,0,5,0,4,0]},j:{kf:b,f:[0]}},V=function(n){for(var t=new Int16Array(c),a=0;a<n.length;a++)t[n[a]>>4]|=1<<u-(15&n[a]);return t},E=function(n){var t=this;t.w=new Int16Array(c),t.D=n,t.ab=[],t.ad=0,t.ac="#000",t.x=0,t.y=-720,t.vx=0,t.vy=0,t.downed=0,t.aa=1,t.p=0,t.w=V(t.D),t.maxVx=2.2*r,t.n=.25,t.e=0,t.hp=9,t.setPixelSize=function(n){t.e=n,t.height=t.width=16*t.e},t.setPixelSize(r),t.u=function(){for(var n=[],a=0;c>a;a++)for(var e=0;c>e;e++)t.w[a]&1<<u-e&&n.push(e*c+u-a);t.D=n,t.w=V(n)},t.addFrame=function(n){t.ab.push(V(n)),t.ad=t.ab.length-1},t.fall=function(){t.y+=t.vy,t.vy<0&&(t.p=0)},t.ah=function(){if(++t.ad>=t.ab.length&&(t.ad=0),"string"==typeof t.ab[t.ad])return t.o(t.ab[t.ad]);for(var n=[],a=0;c>a;a++){t.w[a]=t.w[a]^t.ab[t.ad][a];for(var e=0;c>e;e++)1<<u-e&t.w[a]&&n.push(a*c+e)}t.D=n},t.xi=function(){return t.x+5*t.e},t.xf=function(){return t.x+11*t.e},t.yi=function(){return t.y+2*t.e},t.yil=function(){return t.y+12*t.e},t.yf=function(){return t.y+16*t.e},t.b=function(n){t.vy+=n,t.vy>3*t.e&&(t.vy=3*t.e)},t.land=function(n){t.p||t.o("i"),t.vy=0,t.p=1,t.z=1,t.downed=0,t.y=n-15*t.e},t.l=function(){t.vx>0&&(t.vx=0),t.vx-=t.n,t.p&&t.o("r"),t.vx<-t.maxVx&&(t.vx=-t.maxVx),t.aa=0},t.h=function(){t.vx<0&&(t.vx=0),t.vx+=t.n,t.p&&t.o("r"),t.vx>t.maxVx&&(t.vx=t.maxVx),t.aa=1},t.forward=function(){t.aa?t.h():t.l()},t.turn=function(){t.aa=!t.aa},t.g=function(){0!=t.vx&&(t.vx=0,t.o("i"))},t.ak=function(){(t.p||t.z)&&(t.vy=3*-t.e,t.p||(t.z=0),t.p=0,t.o("j"))},t.down=function(){!t.downed},t.up=function(){},t.d=function(){t.fall(),t.x+=t.vx},t.c=function(){t.x+=t.vx},t.ag=function(){o.fillStyle=t.ac;for(var n=0;n<t.D.length;n++){var a=15&t.D[n];o.fillRect(t.x+(t.aa?a:15-a)*t.e,t.y+(t.D[n]>>4)*t.e,t.e,t.e)}},t.o=function(n){if(t.t!=n){t.t=n,t.ab=[];var a=I[n].f;for(t.w=V(P(I[n].kf)),i=0;i<a.length;i++){var e=D[a[i]];if(-1==a[i])return t.ad=t.ab.length,t.ab.push("i");t.addFrame(P(e))}}},t.hit=function(n){return t.hp-=n,t.hp<0}},P=function(n){for(var t=0,a=n[t],e=[];a;){var i=85;"{"==a[0]&&(a=n[++t],i=0),"~"==a[0]&&(a=n[++t],i=170),e.push(a.charCodeAt()+i-33),a=n[++t]}return e},j=function(n,t,a){var e=this;e.x=n,e.y=t,e.width=a,e.collide=1,e.v=function(n){(n.xi()>e.x&&n.xi()<e.x+e.width||n.xf()>e.x&&n.xf()<e.x+e.width||n.xi()<e.x&&n.xf()>e.x+e.width)&&e.y>n.yil()&&e.y+5<n.yf()&&n.vy>=0?(e.collide=1,n.land(t)):e.collide=0},e.ag=function(){o.fillRect(e.x,e.y,e.width,5)}},q=[],C=function(){var n=this;n.w=1500,n.h=0;var t=20;n.generateLevel=function(){q=[];for(var a=0;a<=n.w;a+=t){var e=a%(2*Math.PI),i=-10*Math.sin(e);n.h=i<n.h?i:n.h,q.push(new j(a,i,t))}},n.generateLevel(),n.ag=function(){var n=~~(-v.x/t);0>n&&(n=0);var a=n+~~(x.w/t);for(a>=q.length&&(a=q.length-1),o.fillStyle="#A4A",e=n;a>=e;e++)q[e].ag()},n.v=function(n){var a=~~(n.xi()/t)-1;0>a&&(a=0);var i=~~(n.xf()/t)+1;for(i>=q.length&&(i=q.length-1),e=a;i>=e;e++)q[e].v(n)},n.agLevel=function(){}},z=function(n){var t=this;t.type=n,0==t.type&&(t.D=P(g)),1==t.type&&(t.D=P(g)),2==t.type&&(t.D=P(g)),3==t.type&&(t.D=P(g)),t.S=new E(t.D),t.ai=0,t.S.ac=Y.ac,t.S.x=Y.x+24,t.S.y=Y.y,t.S.setPixelSize(2),t.S.vx=Y.aa?10:-10,t.S.aa=Y.aa,t.damage=1,t.v=function(){for(var n=d.length-1;n>=0;n--){var a=d[n].S;(a.xi()>t.S.xi()&&a.xi()<t.S.xf()||a.xf()>t.S.xi()&&a.xf()<t.S.xf())&&t.S.y>a.y&&t.S.y<a.yf()&&(t.S.ac="#fff",d[n].hit(t.type,t.damage),t.del=1)}},t.c=function(){t.S.c(),t.ai=t.S.x>L.w||t.S.x<-10},t.ah=function(){0==t.type&&t.S.u(),1==t.type&&t.S.u()}},F=function(t,a){var e=this;e.S=a,e.S.ac="#FFF",e.S.o("i"),e.S.setPixelSize(6),e.f=10,e.w=0,e.a=0,e.e=0,e.S.maxVx=.9*Y.maxVx,e.S.x=300,e.skills=new p([t]),e.actionpipe="",e.setActionPipe=function(n){for(var t="",a=0;a<n.length;a++){var i=n[a],f=parseInt(n.substring(a+1,a+4));if(f){a+=(""+f).length;for(var o=0;f>o;o++)t+=i}else t+=i}e.actionpipe=t},e.setActionPipe("ljdw10jdstw10"),e.actionIndex=0,e.actions={f:e.S.forward,t:e.S.turn,j:e.S.ak,m:function(){},a:e.attack1,b:e.attack2,c:e.attack3,s:e.S.g,w:function(){},l:function(){e.S.p||e.actionIndex--},d:function(){e.S.p?e.S.g():(e.actionIndex--,e.S.forward())}},e.follow=function(){e.S.x<Y.x?e.S.h():e.S.l()},e.away=function(){e.S.x<Y.x&&e.S.x>0?e.S.l():e.S.x>Y.x&&e.S.x+16*e.S.e<L.w?e.S.h():e.S.g()},e.amAction=function(){var n=e.actionpipe[e.actionIndex];e.actions[n](),++e.actionIndex>=e.actionpipe.length&&(e.actionIndex=0)},e.d=function(){e.amAction(),e.S.d()},e.hit=function(t,a){e.S.hit(n(t,e.skills.current,a))&&(e.del=1)}},Y=new E(P(m));Y.o("i");var B=function(n){var t=this;t.S=n,t.S.setPixelSize(5),t.af=2,t.q=16,t.s=h[t.af],t.S.ac="hsl("+t.s+",100%, 50%)",t.r=0,t.am=function(){++t.af>3&&(t.af=0),t.r=5,l-=16},t.prev=function(){--t.af<0&&(t.af=3),l-=64,t.r=-5},t.an=function(){t.q<=0&&(t.S.o("p"),y.push(new z(t.af,2)),t.q=16)},t.d=function(){t.S.d(),t.s+=t.r,t.s<0&&(t.s=355),t.s>355&&(t.s=5),t.s!=h[t.af]?t.S.ac="hsl("+t.s+",100%, 50%)":t.r=0,--t.q<0&&(t.q=0)},t.aj=function(){16&l&&t.am(),64&l&&t.prev(),8&l&&t.S.down(),2&l&&t.S.up(),128&l&&(t.S.ak(),l^=128),32&l&&t.an(),1&l&&t.S.x>-16?t.S.l():4&l&&t.S.x+16*r<L.w?t.S.h():t.S.g()}},L=new C,R=new B(Y),$=new E(P(g));$.ac="#E60",$.e=4;var M=new F(2,new E(P(m)));d.push(M);var J=0,O=R.S.y;requestAnimationFrame(t)}();