!function(){function setFont(a){Ap.font=a?"normal lighter 12px":"normal lighter 18px fantasy"}function Ah(a,t){return!(t.l>a.h||t.h<a.l||t.top>a.AJ||t.AJ<a.top)}function Ai(a,t,n){return af[a][t]*n/2}function Ad(a,t,n,e,A,r){var i=this;i.x=a,i.y=t,i.vx=n,i.vy=e,i.size=A,i.ac=r,i.Aw=100,i.d=function(){return i.x+=i.vx,i.vy+=.2,i.y+=i.vy,i.size*=1,--i.Aw<0},i.ag=function(){Ap.fillStyle="hsla("+i.ac+","+i.Aw+"%, "+i.Aw+"%, "+i.Aw/100+")",Ap.fillRect(i.x,i.y,i.size,i.size)}}function Ac(a,t,n,e,A){for(var r=0;r<a.D.length;r++){var i=15&a.D[r];aq.push(new Ad(a.x+(a.aa?i:15-i)*a.e,a.y+(a.D[r]>>4)*a.e,((a.aa?i:15-i)-8)*t+n,((a.D[r]>>4)-8)*t+e-2,a.e,A))}}function Ae(a,t,n,e){ar.push(new Af(a,t,n,e))}function bl(a,t){Ap.fillStyle="rgba(0,0,0,0.1)",Ap.strokeStyle="#FFF",Ap.fillRect(a,t,au.w,au.h),Ap.font="normal lighter 72px fantasy",Ap.strokeText("VIER",a+au.w/2,t+.1*au.h),setFont(0),Ap.strokeText("Agtaske's Rising",a+au.w/2,t+.2*au.h),Ap.strokeText("Press <Enter> to Start",a+au.w/2,t+.4*au.h),Ap.strokeText("made by @agar3s",a+au.w/2,t+.9*au.h)}function bm(a,t){Ap.fillStyle="rgba(0,0,0,0.1)",Ap.strokeStyle="#FFF",Ap.fillRect(a,t,au.w,au.h),setFont(0),Ap.strokeText("PAUSE",a+au.w/2,t+.3*au.h),setFont(1),Ap.strokeText("Controls",a+au.w/2,t+.5*au.h),Ap.strokeText("ASs",a+au.w/2,t+.6*au.h)}function bn(a,t){Ap.fillStyle="rgba(0,0,0,0.6)",Ap.strokeStyle="#FFF",Ap.fillRect(a,t,au.w,au.h),setFont(0),Ap.strokeText("DEAD",a+au.w/2,t+.3*au.h),setFont(1),Ap.strokeText("enter to restart level",a+au.w/2,t+.5*au.h)}function Al(){Ap.clearRect(-at.x,at.y,au.w,au.h),xlevel.ag(),firexx.ag(),Am.b(.8),xlevel.Av(Am),aw.del||aw.d();for(var j=ap.length-1;j>=0;j--)with(ap[j])d(),S.ag(),as%4==0&&ah(),as%2==0&&Av(),(ai||del)&&ap.splice(j,1);for(var j=Ag.length-1;j>=0;j--)with(Ag[j]){if(del){Ag.splice(j,1);continue}S.ag(),S.b(.8),xlevel.Av(S),d(),as%2==0&&S.ah()}for(var j=an.length-1;j>=0;j--)with(an[j])d(),S.ag(),as%4==0&&ah(),as%2==0&&v(Am.Aq()),(ai||del)&&an.splice(j,1);for(var i=aq.length-1;i>=0;i--)with(aq[i])ag(),d()&&aq.splice(i,1);for(var i=ar.length-1;i>=0;i--)with(ar[i])d(),xlevel.Av(S),S.ag(),as%2==0&&v(Am.Aq()),del&&ar.splice(i,1);as%8==0&&firexx.u(),firexx.c(),as%2==0&&Am.ah(),aw.S.x>450+at.x&&aw.S.x<xlevel.w-au.w+450?(at.x-=aw.S.vx,xxx=-aw.S.vx):xxx=0,yyy=0,at.y-at.oY<-au.h&&aw.S.y+at.oY+16*e>at.y+au.h&&aw.S.vy>0?yyy=-aw.S.vy:aw.S.y-at.oY<at.y&&(aw.S.vy<0?yyy=-aw.S.vy:0==aw.S.vy&&(yyy=yOld-aw.S.y)),at.y-=yyy,yOld=aw.S.y,Ap.translate(xxx,yyy),aw.del?bo="d":(Am.ag(),aw.aj(),aw.ag())}function bj(){bp[bo](-at.x,at.y),256&az&&(actionsScreen[bo](1),az-=256),as%64==0&&(as=0),as++,ra(bj)}var doc=document;doc.get=doc.getElementById;var i,j,Ao=doc.get("c"),Ap=Ao.getContext("2d"),e=4,ppp=16,pp1=15,au={w:1024,h:720},at={x:0,y:-720,oY:250},av=(innerHeight-100)/au.h;Ao.width=au.w*av,Ao.height=au.h*av,Ap.scale(av,av),Ap.translate(at.x,-at.y);var ap=[],an=[],Aj=[295,205,115,25,99],Ab=["#E0F","#09F","#1F0","#F60","yellow"],Ag=[],aq=[],An=[],ar=[],ax=null;Ap.textBaseline="middle",Ap.textAlign="center",setFont();for(var Ax=0,ay=["ms","moz","webkit","o"],x=0;x<ay.length&&!window.requestAnimationFrame;++x)requestAnimationFrame=window[ay[x]+"RequestAnimationFrame"];requestAnimationFrame||(requestAnimationFrame=function(a){var t=(new Date).getTime(),n=Math.max(0,16-(t-Ax)),e=setTimeout(function(){a(t+n)},n);return Ax=t+n,e}),ra=requestAnimationFrame;var az=0,Aa={37:1,38:2,39:4,40:8,65:16,83:32,68:64,32:128,13:256};doc.addEventListener("keydown",function(a){var t=a.keyCode?a.keyCode:a.which;Aa[t]&&(az|=Aa[t],a.preventDefault())}),doc.addEventListener("keyup",function(a){var t=a.keyCode?a.keyCode:a.which;az&Aa[t]&&(az^=Aa[t],a.preventDefault())});var af=[[0,4,2,1],[1,0,4,2],[2,1,0,4],[4,2,1,0]],Ak=function(a,t){var n=this;n.Aus=a,n.As=[],n.current=n.Aus[0],n.bq=t;for(var e=0;e<a.length;e++)n.As.push(t);n.bd=function(a,t,e){if(n.As[n.current]-->0){var A=new AS(n.current,2,t,e,Am.aa?10:-10,a);ap.push(A),n.za()}else n.As[n.current]=0,n.za()},n.za=function(){n.bq=n.As[n.current]},n.ag=function(a,t){for(var e=0;4>e;e++)Ap.fillStyle=e==n.current&&as%8==0?"#000":Ab[e],Ap.fillText(""+n.As[e],a+40+(e%2==0?35:1==e?69:0),t-40-(e%2==1?30:0==e?60:0));firexx.x=a+50,firexx.y=t-95,firexx.ag()}},fire="{f{g{h{i{u!$%056?@ABFORV`bcefostu~,",AX='{H{I{X{Y"#$134ACEQSVacdsu~.~1~=~@~M~P~]~^~`~a',Ar='{I{J{Y{Z"#$134ACERSVcdsu~.~0~=~?~M~O~]~^~_~`',AXrun='{Y{Z{i{j"#$134ACDESVWbcdqru~)~*~+~0~9~A~Q~a~b',AXak="{Z{[{g{h{i{j{k!#$134ACESTcesu~-~0~=~?~L~O~\\~_",AZ="ABCDEQSUabcdequ~,~0~<~@~L~P~\\~]~^~_~`",ab=["",'~A~>~0tqfUD2{i{h~@~=~1udVE1$#"{I{H',"B65VREA","~@~>tD2('&%{m{j{i~?~=udB651\"{J{I","~_~P~O~J~;~:~,tUB~b~a~Q~9~+~*~)uqWEA",'~`~M~?~>~=~/T2{k{[~P~J~A~;~:~0~,rdbVB1"{i{Y'],At={i:{kf:AX,f:[0,0,0,0,0,0,0,0,0,1]},p:{kf:Ar,f:[2,3,3,2,0,-1]},r:{kf:AXrun,f:[0,4,0,5,0,5,0,4,0]},j:{kf:AXak,f:[0]}},Ay=function(a){for(var t=new Int16Array(ppp),n=0;n<a.length;n++)t[a[n]>>4]|=1<<pp1-(15&a[n]);return t},AM=function(a){var t=this;t.w=new Int16Array(ppp),t.D=Az(a),t.ab=[],t.ad=0,t.ac="#000",t.x=0,t.y=-720,t.vx=0,t.vy=0,t.aa=1,t.p=0,t.w=Ay(t.D),t.AD=2.2*e,t.n=.25,t.e=0,t.hp=1,t.AA=function(a){t.e=a,t.height=t.width=16*t.e},t.AA(e),t.u=function(){for(var a=[],n=0;ppp>n;n++)for(var e=0;ppp>e;e++)t.w[n]&1<<pp1-e&&a.push(e*ppp+pp1-n);t.D=a,t.w=Ay(a)},t.AB=function(a){t.ab.push(Ay(a)),t.ad=t.ab.length-1},t.AC=function(){t.y+=t.vy,t.vy<0&&(t.p=0)},t.ah=function(){if(++t.ad>=t.ab.length&&(t.ad=0),"string"==typeof t.ab[t.ad])return t.o(t.ab[t.ad]);for(var a=[],n=0;ppp>n;n++){t.w[n]=t.w[n]^t.ab[t.ad][n];for(var e=0;ppp>e;e++)1<<pp1-e&t.w[n]&&a.push(n*ppp+e)}t.D=a},t.xi=function(){return t.x+5*t.e},t.xpi=function(){return t.x+t.e},t.xf=function(){return t.x+11*t.e},t.xpf=function(){return t.x+14*t.e},t.yi=function(){return t.y+2*t.e},t.yil=function(){return t.y+12*t.e},t.yf=function(){return t.y+16*t.e},t.b=function(a){t.vy+=a,t.vy>3*t.e&&(t.vy=3*t.e)},t.AH=function(a){t.p||t.o("i"),t.vy=0,t.p=1,t.z=1,t.downed=0,t.y=a-15*t.e},t.l=function(){t.vx>0&&(t.vx=0),t.vx-=t.n,t.p&&t.o("r"),t.vx<-t.AD&&(t.vx=-t.AD),t.aa=0},t.h=function(){t.vx<0&&(t.vx=0),t.vx+=t.n,t.p&&t.o("r"),t.vx>t.AD&&(t.vx=t.AD),t.aa=1},t.AI=function(){t.aa?t.x+17*e<xlevel.w?t.h():t.g():t.x>0?t.l():t.g()},t.turn=function(){t.aa=!t.aa},t.g=function(){0!=t.vx&&(t.vx=0,t.o("i"))},t.ak=function(){(t.p||t.z)&&(t.vy=3*-t.e,t.p||(t.z=0),t.p=0,t.o("j"))},t.d=function(){t.AC(),t.x+=t.vx},t.c=function(){t.x+=t.vx},t.dY=function(){t.y+=t.vy},t.ag=function(){Ap.fillStyle=t.ac;for(var a=0;a<t.D.length;a++){var n=15&t.D[a];Ap.fillRect(t.x+(t.aa?n:15-n)*t.e,t.y+(t.D[a]>>4)*t.e,t.e,t.e)}},t.o=function(a){if(t.t!=a){t.t=a,t.ab=[];var n=At[a].f;for(t.w=Ay(Az(At[a].kf)),j=0;j<n.length;j++){var e=ab[n[j]];if(-1==n[j])return t.ad=t.ab.length,t.ab.push("i");t.AB(Az(e))}}},t.ba=function(a){return t.hp-=a,t.hp<0&&(t.hp=0),0==t.hp},t.Aq=function(){return{l:t.xi(),h:t.xf(),top:t.yi(),AJ:t.yf()}}},Az=function(a){for(var t=0,n=a[t],e=[];n;){var A=85;"{"==n[0]&&(n=a[++t],A=0),"~"==n[0]&&(n=a[++t],A=170),e.push(n.charCodeAt()+A-33),n=a[++t]}return e},AF=function(a,t,n){var e=this;e.x=a,e.y=t,e.width=n,e.AG=1,e.Av=function(a){(a.xi()>e.x&&a.xi()<e.x+e.width||a.xf()>e.x&&a.xf()<e.x+e.width||a.xi()<e.x&&a.xf()>e.x+e.width)&&e.y>a.yil()&&e.y+5<a.yf()&&a.vy>=0?(e.AG=1,a.AH(t)):e.AG=0},e.ag=function(){Ap.fillRect(e.x,e.y,e.width,5)}},AK=function(){var a=this;a.w=1424,a.h=0;var t=20;a.AE=function(){An=[];for(var n=0;n<=a.w;n+=t){var e=n%(2*Math.PI),A=-10*Math.sin(e);a.h=A<a.h?A:a.h,An.push(new AF(n,A,t))}},a.AE(),a.ag=function(){var a=~~(-at.x/t);0>a&&(a=0);var n=a+~~(au.w/t);for(n>=An.length&&(n=An.length-1),Ap.fillStyle="#A4A",i=a;n>=i;i++)An[i].ag()},a.Av=function(a){var n=~~(a.xi()/t)-1;0>n&&(n=0);var e=~~(a.xf()/t)+1;for(e>=An.length&&(e=An.length-1),i=n;e>=i;i++)An[i].Av(a)}},AS=function(a,t,n,e,A,r){var i=this;i.type=a,0==i.type&&(i.D=fire),1==i.type&&(i.D=fire),2==i.type&&(i.D=fire),3==i.type&&(i.D=fire),i.S=new AM(i.D),i.ai=0,i.ac=Aj[a],i.S.ac=Ab[a],i.S.x=n,i.S.y=e,i.S.AA(2),i.S.vx=A,i.S.vy=r,i.S.aa=A>0,i.bc=1,i.del=0,i.Av=function(){for(var a=Ag.length-1;a>=0;a--){var t=Ag[a].S;Ah(t.Aq(),i.S.Aq())&&(Ag[a].ba(i.type,i.bc),i.del=1,Ac(i.S,2,i.S.vx/2,-3,i.ac))}},i.v=function(a){Ah(a,i.S.Aq())&&(aw.ba(i.type,i.bc),i.del=1,Ac(i.S,2,i.S.vx/2,-3,i.ac))},i.d=function(){i.S.c(),i.S.dY(),i.ai=i.S.x>xlevel.w||i.S.x<-10},i.ah=function(){0==i.type&&i.S.u(),1==i.type&&i.S.u()}},Af=function(a,t,n,e){var A=this;A.type=a,A.AP=t,A.S=new AM(AZ),A.ac=Aj[a],A.S.ac=Ab[a],A.S.x=n,A.S.y=e,A.S.vy=.5,A.S.p=0,A.AR=256,A.del=0,A.d=function(){var t=as%32==0;A.S.p?(A.del=0==A.AR--,t=as%~~(A.AR/16)==0):A.S.dY(),A.S.ac=t?"#fff":Ab[a]},A.v=function(a){Ah(a,A.S.Aq())&&(aw.AL(A.type,A.AP),A.del=1,Ac(A.S,0,0,-4,A.ac))}},AW=function(a,t,n){var e=this;e.S=t,e.ac=Aj[a],e.S.ac="hsl("+e.ac+",100%, 50%)",e.S.o("i"),e.S.AA(7),e.S.AD=.9*Am.AD,e.S.x=n,e.AN=new Ak([a]),e.AO=4,e.S.hp=4,e.q=16,e.AV=100,e.del=0,e.AQ="",e.AU=function(a){for(var t="",n=0;n<a.length;n++){var A=a[n],r=parseInt(a.substring(n+1,n+4));if(r){n+=(""+r).length;for(var i=0;r>i;i++)t+=A}else t+=A}e.AQ=t},e.AU("lgajdag10jdsajd"),e.AY=0,e.attack1=function(){if(e.q<=0){e.S.o("p");var a=-(e.S.x-Am.x),t=-(e.S.y-Am.y),n=Math.sqrt(a*a+t*t);a/=n,t/=n;var A=new AS(e.AN.current,2,e.S.x+24,e.S.y,3*a,3*t);an.push(A),e.q=16}},e.bb=function(){e.S.aa=e.S.x<Am.x,e.S.AI()},e.be=function(){e.S.aa=e.S.x>Am.x,e.S.AI()},e.actions={f:e.S.AI,t:e.S.turn,j:e.S.ak,m:function(){},a:e.attack1,b:e.attack2,c:e.attack3,s:e.S.g,w:function(){},l:function(){e.S.p||e.AY--},d:function(){e.S.p?e.S.g():(e.AY--,e.S.AI())},g:e.bb,r:e.be},e.ao=function(){var a=e.AQ[e.AY];e.actions[a](),++e.AY>=e.AQ.length&&(e.AY=0)},e.d=function(){e.ao(),e.S.d(),--e.q<0&&(e.q=0)},e.trigger=function(){Ag.push(new AW(~~(4*Math.random()),new AM(AX),Math.random()*xlevel.w)),Ag.push(new AW(~~(4*Math.random()),new AM(AX),Math.random()*xlevel.w)),0==~~(10*Math.random())?Ae(4,e.AO,e.S.x,e.S.y):Ae(e.AN.current,e.AO,e.S.x,e.S.y)},e.ba=function(a,t){e.S.ba(Ai(a,e.AN.current,t))&&!e.del&&(e.del=1,Ac(e.S,t,0,0,e.ac),e.trigger("death")),ax=e},e.agAvatar=function(a,t){Ap.fillStyle=as%16==0?"#000":"yellow",Ap.fillRect(a-335,t+35,300,8),Ap.fillStyle="#300",Ap.fillRect(a-334,t+36,300*(1-e.S.hp/e.AO)-2,6)}},Am=new AM(AX);Am.o("i");var AT=function(S){var m=this;m.S=S,m.S.AA(5),m.AN=new Ak([0,1,2,3],99),m.q=16,m.s=Aj[m.AN.current],m.S.ac="hsl("+m.s+",100%, 50%)",m.r=0,m.down=0,m.up=0,m.S.hp=31,m.AO=31,m.del=0,m.am=function(){++m.AN.current>3&&(m.AN.current=0),m.AN.za(),firexx.ac=Ab[m.AN.current],m.r=5,az-=64},m.prev=function(){--m.AN.current<0&&(m.AN.current=3),m.AN.za(),firexx.ac=Ab[m.AN.current],az-=16,m.r=-5},m.bd=function(){if(m.q<=0){m.S.o("p");var a=0;m.down&&(a=7),m.up&&(a=-7),m.AN.bd(a,Am.x+24,Am.y),m.q=16}m.S.ac="hsl("+m.s+","+m.AN.bq+"%, 50%)"},m.d=function(){m.S.d(),m.s+=m.r,m.s<0&&(m.s=355),m.s>355&&(m.s=5),m.s!=Aj[m.AN.current]?m.S.ac="hsl("+m.s+","+m.AN.bq+"%, 50%)":m.r=0,--m.q<0&&(m.q=0)},m.aj=function(){64&az&&m.am(),16&az&&m.prev(),m.down=8&az?1:0,m.up=2&az?1:0,128&az&&(m.S.ak(),az^=128),32&az&&m.bd(),1&az&&m.S.x>-16?m.S.l():4&az&&m.S.x+16*e<xlevel.w?m.S.h():m.S.g()},m.ba=function(a,t){Am.ba(Ai(a,m.AN.current,t))&&!m.del&&(m.del=1,Ac(Am,t,0,0,m.ac))},m.AL=function(a,t){4==a?(m.S.hp+=t,m.S.hp>m.AO&&(m.S.hp=m.AO)):(m.AN.As[a]+=t,m.AN.As[a]>99&&(m.AN.As[a]=99))},m.ag=function(){var vx=-at.x,vy=at.y;if(Ap.strokeStyle="yellow",Ap.fillStyle="#300",Ap.strokeRect(vx+35,vy+35,300,8),Ap.fillRect(vx+35,vy+35,300,8),Ap.fillStyle="yellow",Ap.fillRect(vx+35,vy+35,300*(m.S.hp/m.AO),8),m.AN.ag(vx,vy+au.h),ax)with(ax)agAvatar(vx+au.w,vy),del&&0==--AV&&(ax=null)}},xlevel=new AK,aw=new AT(Am),firexx=new AM(fire);firexx.ac=Ab[0],firexx.e=3,Ag.push(new AW(1,new AM(AX),Math.random()*xlevel.w));var as=0,yOld=aw.S.y,bo="i",bp={g:Al,i:bl,p:bm,d:function(a,t){Al(),bn(a,t)}},actionsScreen={g:function(){bo="p"},i:function(){bo="g"},p:function(){bo="g"},d:function(){console.log("restart level")}};ra(bj)}();