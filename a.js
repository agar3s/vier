!function(){function n(){f.clearRect(-v.x,v.y,x.w,x.h)}function a(){n(),C.ag(),L.ag(),j.b(.8),C.v(j),R.S.b(.8),C.v(R.S),R.d(),j.d(),P.d();for(var t=q.length-1;t>=0;t--)q[t].c(),q[t].S.ag(),$%4==0&&q[t].ah(),q[t].ai&&q.splice(t,1);$%8==0&&(L.u(),$=0),L.c(),j.ag(),R.S.ag(),P.aj(),$%2==0&&(j.ah(),R.S.ah()),$++,P.S.x>300+v.x&&P.S.x-300<C.w-x.w?(v.x-=P.S.vx,xxx=-P.S.vx):xxx=0,yyy=0,v.y-v.oY<-x.h&&P.S.y+v.oY+16*r>v.y+x.h&&P.S.vy>0?yyy=-P.S.vy:P.S.y-v.oY<v.y&&(P.S.vy<0?yyy=-P.S.vy:0==P.S.vy&&(yyy=J-P.S.y)),v.y-=yyy,J=P.S.y,f.translate(xxx,yyy),requestAnimationFrame(a)}var t=document;t.get=t.getElementById;var e,i,o=t.get("c"),f=o.getContext("2d"),r=4,c=16,u=15,x={w:1024,h:720},v={x:0,y:-720,oY:250},y=(window.innerHeight-100)/x.h;o.width=x.w*y,o.height=x.h*y,f.scale(y,y),f.translate(v.x,-v.y);var S=0,h={37:1,38:2,39:4,40:8,65:16,83:32,68:64,32:128};t.addEventListener("keydown",function(n){var a=n.keyCode?n.keyCode:n.which;h[a]&&(S|=h[a],n.alentDefault())}),t.addEventListener("keyup",function(n){var a=n.keyCode?n.keyCode:n.which;S&h[a]&&(S^=h[a],n.alentDefault())});var d="{f{g{h{i{u!$%056?@ABFORV`bcefostu~,",l='{H{I{X{Y"#$134ACEQSVacdsu~.~1~=~@~M~P~]~^~`~a',w='{I{J{Y{Z"#$134ACERSVcdsu~.~0~=~?~M~O~]~^~_~`',s='{Y{Z{i{j"#$134ACDESVWbcdqru~)~*~+~0~9~A~Q~a~b',p="{Z{[{g{h{i{j{k!#$134ACESTcesu~-~0~=~?~L~O~\\~_",g=["",'~A~>~0tqfUD2{i{h~@~=~1udVE1$#"{I{H',"B65VREA","~@~>tD2('&%{m{j{i~?~=udB651\"{J{I","~_~P~O~J~;~:~,tUB~b~a~Q~9~+~*~)uqWEA",'~`~M~?~>~=~/T2{k{[~P~J~A~;~:~0~,rdbVB1"{i{Y'],m={i:{kf:l,f:[0,0,0,0,0,0,0,0,0,1]},p:{kf:w,f:[2,3,3,2,0,-1]},r:{kf:s,f:[0,4,0,5,0,5,0,4,0]},j:{kf:p,f:[0]}},A=function(n){for(var a=new Int16Array(c),t=0;t<n.length;t++)a[n[t]>>4]|=1<<u-(15&n[t]);return a},b=function(n){var a=this;a.w=new Int16Array(c),a.D=n,a.ab=[],a.ad=0,a.ac="#000",a.x=0,a.y=-720,a.vx=0,a.vy=0,a.downed=0,a.aa=1,a.p=0,a.w=A(a.D),a.maxVx=2.2*r,a.n=.25,a.e=r,a.u=function(){for(var n=[],t=0;c>t;t++)for(var e=0;c>e;e++)a.w[t]&1<<u-e&&n.push(e*c+u-t);a.D=n,a.w=A(n)},a.addFrame=function(n){a.ab.push(A(n)),a.ad=a.ab.length-1},a.fall=function(){a.y+=a.vy,a.vy<0&&(a.p=0)},a.ah=function(){if(++a.ad>=a.ab.length&&(a.ad=0),"string"==typeof a.ab[a.ad])return a.o(a.ab[a.ad]);for(var n=[],t=0;c>t;t++){a.w[t]=a.w[t]^a.ab[a.ad][t];for(var e=0;c>e;e++)1<<u-e&a.w[t]&&n.push(t*c+e)}a.D=n},a.xi=function(){return a.x+5*a.e},a.xf=function(){return a.x+11*a.e},a.yi=function(){return a.y+2*a.e},a.yil=function(){return a.y+12*a.e},a.yf=function(){return a.y+16*a.e},a.b=function(n){a.vy+=n,a.vy>3*a.e&&(a.vy=3*a.e)},a.land=function(n){a.p||a.o("i"),a.vy=0,a.p=1,a.z=1,a.downed=0,a.y=n-15*a.e},a.l=function(){a.vx>0&&(a.vx=0),a.vx-=a.n,a.p&&a.o("r"),a.vx<-a.maxVx&&(a.vx=-a.maxVx),a.aa=0},a.h=function(){a.vx<0&&(a.vx=0),a.vx+=a.n,a.p&&a.o("r"),a.vx>a.maxVx&&(a.vx=a.maxVx),a.aa=1},a.forward=function(){a.aa?a.h():a.l()},a.turn=function(){a.aa=!a.aa},a.g=function(){0!=a.vx&&(a.vx=0,a.o("i"))},a.ak=function(){(a.p||a.z)&&(a.vy=3*-a.e,a.p||(a.z=0),a.p=0,a.o("j"))},a.down=function(){!a.downed},a.up=function(){},a.d=function(){a.fall(),a.x+=a.vx},a.c=function(){a.x+=a.vx},a.ag=function(){f.fillStyle=a.ac;for(var n=0;n<a.D.length;n++){var t=15&a.D[n];f.fillRect(a.x+(a.aa?t:15-t)*a.e,a.y+(a.D[n]>>4)*a.e,a.e,a.e)}},a.o=function(n){if(a.t!=n){a.t=n,a.ab=[];var t=m[n].f;for(a.w=A(k(m[n].kf)),i=0;i<t.length;i++){var e=g[t[i]];if(-1==t[i])return a.ad=a.ab.length,a.ab.push("i");a.addFrame(k(e))}}}},k=function(n){for(var a=0,t=n[a],e=[];t;){var i=85;"{"==t[0]&&(t=n[++a],i=0),"~"==t[0]&&(t=n[++a],i=170),e.push(t.charCodeAt()+i-33),t=n[++a]}return e},D=function(n,a,t){var e=this;e.x=n,e.y=a,e.width=t,e.collide=1,e.v=function(n){(n.xi()>e.x&&n.xi()<e.x+e.width||n.xf()>e.x&&n.xf()<e.x+e.width||n.xi()<e.x&&n.xf()>e.x+e.width)&&e.y>n.yil()&&e.y+5<n.yf()&&n.vy>=0?(e.collide=1,n.land(a)):e.collide=0},e.ag=function(){f.fillRect(e.x,e.y,e.width,5)}},I=[],V=function(){var n=this;n.w=1500,n.h=0;var a=20;n.generateLevel=function(){I=[];for(var t=0;t<=n.w;t+=a){var e=t%(2*Math.PI),i=-10*Math.sin(e);n.h=i<n.h?i:n.h,I.push(new D(t,i,a))}},n.generateLevel(),n.ag=function(){var n=Math.floor(-v.x/a);0>n&&(n=0);var t=n+Math.floor(x.w/a);for(t>=I.length&&(t=I.length-1),f.fillStyle="#A4A",e=n;t>=e;e++)I[e].ag()},n.v=function(n){var t=Math.floor(n.xi()/a)-1;0>t&&(t=0);var i=Math.floor(n.xf()/a)+1;for(i>=I.length&&(i=I.length-1),e=t;i>=e;e++)I[e].v(n)},n.agLevel=function(){}},E=function(n,a){var t=this;t.type=n,t.S=a,t.S.ac="#FFF",t.S.o("i"),t.S.e=5,t.f=10,t.w=0,t.a=0,t.e=0,t.S.maxVx=.9*j.maxVx,t.S.x=300,t.actionpipe="",t.setActionPipe=function(n){for(var a="",e=0;e<n.length;e++){var i=n[e],o=parseInt(n.substring(e+1,e+4));if(o){e+=Math.floor(Math.log10(o))+1;for(var f=0;o>f;f++)a+=i}else a+=i}t.actionpipe=a},t.setActionPipe("jdw10jdstw10"),t.actionIndex=0,t.actions={f:t.S.forward,t:t.S.turn,j:t.S.ak,m:function(){},a:t.attack1,b:t.attack2,c:t.attack3,s:t.S.g,w:function(){},l:function(){t.S.p||t.actionIndex--},d:function(){t.S.p?t.S.g():(t.actionIndex--,t.S.forward())}},t.follow=function(){t.S.x<j.x?t.S.h():t.S.l()},t.away=function(){t.S.x<j.x&&t.S.x>0?t.S.l():t.S.x>j.x&&t.S.x+16*t.S.e<C.w?t.S.h():t.S.g()},t.amAction=function(){var n=t.actionpipe[t.actionIndex];t.actions[n](),++t.actionIndex>=t.actionpipe.length&&(t.actionIndex=0)},t.d=function(){t.amAction(),t.S.d()}},M=k(l),j=new b(M),q=[],C=new V;j.o("i");var F=[25,115,205,295],Y=function(n){var a=this;a.type=n,0==a.type&&(a.D=k(d)),1==a.type&&(a.D=k(water)),a.S=new b(a.D),a.ai=0,a.S.ac=j.ac,a.S.x=j.x+24,a.S.y=j.y,a.S.e=2,a.S.vx=j.aa?10:-10,a.S.aa=j.aa,a.c=function(){a.S.c(),a.ai=a.S.x>C.w||a.S.x<-10},a.ah=function(){0==a.type&&a.S.u(),1==a.type&&a.S.u()}},B=function(n){var a=this;a.S=n,a.af=0,a.q=16,a.s=F[a.af],a.S.ac="hsl("+a.s+",100%, 50%)",a.r=0,a.am=function(){++a.af>3&&(a.af=0),a.r=5,S-=16},a.al=function(){--a.af<0&&(a.af=3),S-=64,a.r=-5},a.an=function(){a.q<=0&&(a.S.o("p"),q.push(new Y(0,2)),a.q=16)},a.d=function(){a.s+=a.r,a.s<0&&(a.s=355),a.s>355&&(a.s=5),a.s!=F[a.af]?a.S.ac="hsl("+a.s+",100%, 50%)":a.r=0,--a.q<0&&(a.q=0)},a.aj=function(){16&S&&a.am(),64&S&&a.al(),8&S&&a.S.down(),2&S&&a.S.up(),128&S&&(a.S.ak(),S^=128),32&S&&a.an(),1&S&&a.S.x>-16?a.S.l():4&S&&a.S.x+16*r<C.w?a.S.h():a.S.g()}};M=k(d);var L=new b(M);L.ac="#E60";var P=new B(j);L.e=4,j.e=5;var R=new E("F",new b(k(l))),$=0,J=P.S.y;requestAnimationFrame(a)}();