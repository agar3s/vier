!function(){function n(){f.clearRect(-v.x,v.y,y.w,y.h)}function t(){n(),Z.draw(),V.DC(),m.AY(.8),Z.CO(),m.PD(),X.PD();for(var e=E.length-1;e>=0;e--)E[e].PX(),E[e].S.DC(),Y%4==0&&E[e].animate(),E[e].outside&&E.splice(e,1);Y%8==0&&(V.RO(),Y=0),V.PX(),m.DC(),X.manage(),Y%2==0&&m.animate(),Y++,X.S.x>300+v.x&&X.S.x-300<Z.w-y.w?(v.x-=X.S.vx,xxx=-X.S.vx):xxx=0,yyy=0,v.y-v.oY<-y.h&&X.S.y+v.oY+16*a>v.y+y.h&&X.S.vy>0?yyy=-X.S.vy:X.S.y-v.oY<v.y&&(X.S.vy<0?yyy=-X.S.vy:0==X.S.vy&&(yyy=M-X.S.y)),v.y-=yyy,M=X.S.y,f.translate(xxx,yyy),requestAnimationFrame(t)}var e=document;e.get=e.getElementById;var i,r,o=e.get("c"),f=o.getContext("2d"),a=4,u=16,x=15,y={w:1024,h:720},v={x:0,y:-720,oY:250},c=(window.innerHeight-100)/y.h;o.width=y.w*c,o.height=y.h*c,f.scale(c,c),f.translate(v.x,-v.y);var C=0,h={37:1,38:2,39:4,40:8,65:16,83:32,68:64,32:128};e.addEventListener("keydown",function(n){var t=n.keyCode?n.keyCode:n.which;h[t]&&(C|=h[t],n.preventDefault())}),e.addEventListener("keyup",function(n){var t=n.keyCode?n.keyCode:n.which;C&h[t]&&(C^=h[t],n.preventDefault())});var S="{f{g{h{i{u!$%056?@ABFORV`bcefostu~,",l='{H{I{X{Y"#$134ACEQSVacdsu~.~1~=~@~M~P~]~^~`~a',d='{I{J{Y{Z"#$134ACERSVcdsu~.~0~=~?~M~O~]~^~_~`',A='{Y{Z{i{j"#$134ACDESVWbcdqru~)~*~+~0~9~A~Q~a~b',w="{Z{[{g{h{i{j{k!#$134ACESTcesu~-~0~=~?~L~O~\\~_",s=["",'~A~>~0tqfUD2{i{h~@~=~1udVE1$#"{I{H',"B65VREA","~@~>tD2('&%{m{j{i~?~=udB651\"{J{I","~_~P~O~J~;~:~,tUB~b~a~Q~9~+~*~)uqWEA",'~`~M~?~>~=~/T2{k{[~P~J~A~;~:~0~,rdbVB1"{i{Y'],D={i:{kf:l,f:[0,0,0,0,0,0,0,0,0,1]},p:{kf:d,f:[2,3,3,2,0,-1]},r:{kf:A,f:[0,4,0,5,0,5,0,4,0]},j:{kf:w,f:[0]}},I=function(n){for(var t=new Int16Array(u),e=0;e<n.length;e++)t[n[e]>>4]|=1<<x-(15&n[e]);return t},P=function(n){var t=this;t.BA=new Int16Array(u),t.D=n,t.FR=[],t.IF=0,t.CR="#000",t.x=0,t.y=-720,t.vx=0,t.vy=0,t.downed=0,t.DI=1,t.LA=0,t.BA=I(t.D),t.maxVx=2.2*a,t.AX=.25,t.PZ=a,t.RO=function(){for(var n=[],e=0;u>e;e++)for(var i=0;u>i;i++)t.BA[e]&1<<x-i&&n.push(i*u+x-e);t.D=n,t.BA=I(n)},t.addFrame=function(n){t.FR.push(I(n)),t.IF=t.FR.length-1},t.fall=function(){t.y+=t.vy,t.vy<0&&(t.LA=0)},t.animate=function(){if(++t.IF>=t.FR.length&&(t.IF=0),"string"==typeof t.FR[t.IF])return t.SA(t.FR[t.IF]);for(var n=[],e=0;u>e;e++){t.BA[e]=t.BA[e]^t.FR[t.IF][e];for(var i=0;u>i;i++)1<<x-i&t.BA[e]&&n.push(e*u+i)}t.D=n},t.xi=function(){return t.x+5*t.PZ},t.xf=function(){return t.x+11*t.PZ},t.yi=function(){return t.y+2*t.PZ},t.yil=function(){return t.y+12*t.PZ},t.yf=function(){return t.y+16*t.PZ},t.AY=function(n){t.vy+=n,t.vy>3*t.PZ&&(t.vy=3*t.PZ)},t.land=function(n){t.LA||t.SA("i"),t.vy=0,t.LA=1,t.CJ=1,t.downed=0,t.y=n-15*t.PZ},t.LE=function(){t.vx>0&&(t.vx=0),t.vx-=t.AX,t.LA&&t.SA("r"),t.vx<-t.maxVx&&(t.vx=-t.maxVx),t.DI=0},t.RI=function(){t.vx<0&&(t.vx=0),t.vx+=t.AX,t.LA&&t.SA("r"),t.vx>t.maxVx&&(t.vx=t.maxVx),t.DI=1},t.SX=function(){0!=t.vx&&(t.vx=0,t.SA("i"))},t.jump=function(){(t.LA||t.CJ)&&(t.vy=3*-t.PZ,t.LA||(t.CJ=0),t.LA=0,t.SA("j"))},t.down=function(){!t.downed},t.up=function(){},t.PD=function(){t.fall(),t.x+t.vx&&(t.x+=t.vx)},t.PX=function(){t.x+=t.vx},t.DC=function(){f.fillStyle=t.CR;for(var n=0;n<t.D.length;n++){var e=15&t.D[n];f.fillRect(t.x+(t.DI?e:15-e)*t.PZ,t.y+(t.D[n]>>4)*t.PZ,t.PZ,t.PZ)}},t.SA=function(n){if(t.CA!=n){t.CA=n,t.FR=[];var e=D[n].f;for(t.BA=I(R(D[n].kf)),r=0;r<e.length;r++){var i=s[e[r]];if(-1==e[r])return t.IF=t.FR.length,t.FR.push("i");t.addFrame(R(i))}}}},R=function(n){for(var t=0,e=n[t],i=[];e;){var r=85;"{"==e[0]&&(e=n[++t],r=0),"~"==e[0]&&(e=n[++t],r=170),i.push(e.charCodeAt()+r-33),e=n[++t]}return i},p=function(n,t,e){var i=this;i.x=n,i.y=t,i.width=e,i.collide=1,i.CO=function(){(m.xi()>i.x&&m.xi()<i.x+i.width||m.xf()>i.x&&m.xf()<i.x+i.width||m.xi()<i.x&&m.xf()>i.x+i.width)&&i.y>m.yil()&&i.y+5<m.yf()&&m.vy>=0?(i.collide=1,m.land(t)):i.collide=0},i.draw=function(){f.fillRect(i.x,i.y,i.width,5)}},g=[],L=function(){var n=this;n.w=1500,n.h=0;var t=1;n.generateLevel=function(){g=[];for(var e=0;e<=n.w;e+=t){var i=(e%(2*Math.PI),-20-e*e/1e3);n.h=i<n.h?i:n.h,g.push(new p(e,i,t))}},n.generateLevel(),n.draw=function(){var n=Math.floor(-v.x/t);0>n&&(n=0);var e=n+Math.floor(y.w/t);for(e>=g.length&&(e=g.length-1),f.fillStyle="#A44",i=n;e>=i;i++)g[i].draw()},n.CO=function(){var n=Math.floor(m.xi()/t)-1;0>n&&(n=0);var e=Math.floor(m.xf()/t)+1;for(e>=g.length&&(e=g.length-1),i=n;e>=i;i++)g[i].CO()},n.drawLevel=function(){}},F=R(l),m=new P(F),E=[],Z=new L;m.SA("i");var O=[25,115,205,295],B=function(n){var t=this;t.type=n,0==t.type&&(t.D=R(S)),1==t.type&&(t.D=R(water)),t.S=new P(t.D),t.outside=0,t.S.CR=m.CR,t.S.x=m.x+24,t.S.y=m.y,t.S.PZ=2,t.S.vx=m.DI?10:-10,t.S.DI=m.DI,t.PX=function(){t.S.PX(),t.outside=t.S.x>Z.w||t.S.x<-10},t.animate=function(){0==t.type&&t.S.RO(),1==t.type&&t.S.RO()}},k=function(n){var t=this;t.S=n,t.EL=0,t.CO=16,t.CC=O[t.EL],t.S.CR="hsl("+t.CC+",100%, 50%)",t.IC=0,t.next=function(){++t.EL>3&&(t.EL=0),t.IC=5,C-=16},t.prev=function(){--t.EL<0&&(t.EL=3),C-=64,t.IC=-5},t.power=function(){t.CO<=0&&(t.S.SA("p"),E.push(new B(0,2)),t.CO=16)},t.PD=function(){t.CC+=t.IC,t.CC<0&&(t.CC=355),t.CC>355&&(t.CC=5),t.CC!=O[t.EL]?t.S.CR="hsl("+t.CC+",100%, 50%)":t.IC=0,--t.CO<0&&(t.CO=0)},t.manage=function(){16&C&&t.next(),64&C&&t.prev(),8&C&&t.S.down(),2&C&&t.S.up(),128&C&&(t.S.jump(),C^=128),32&C&&t.power(),1&C&&t.S.x>-16?t.S.LE():4&C&&t.S.x+16*a<Z.w?t.S.RI():t.S.SX()}};F=R(S);var V=new P(F);V.CR="#E60";var X=new k(m);V.PZ=4,m.PZ=5;var Y=0,M=X.S.y;requestAnimationFrame(t)}();