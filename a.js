!function(){function n(n,a,t){return g[n][a]*t/2}function a(n,a,t,e,i){for(var f=0;f<n.D.length;f++){var o=15&n.D[f];s.push(new k(n.x+(n.aa?o:15-o)*n.e,n.y+(n.D[f]>>4)*n.e,((n.aa?o:15-o)-8)*a+t,((n.D[f]>>4)-8)*a+e-2,n.e,i))}}function t(){r.clearRect(-y.x,y.y,v.w,v.h),F.ag(),O.ag(),M.ag(),M.b(.8),F.v(M),J.d();for(var n=l.length-1;n>=0;n--)l[n].d(),l[n].S.ag(),H%4==0&&l[n].ah(),H%2==0&&l[n].v(),(l[n].ai||l[n].del)&&l.splice(n,1);for(var n=d.length-1;n>=0;n--){var a=d[n];a.del?d.splice(n,1):(a.S.ag(),a.S.b(.8),F.v(a.S),a.d(),H%2==0&&a.S.ah())}for(var e=s.length-1;e>=0;e--)s[e].ag(),s[e].d()&&s.splice(e,1);H%8==0&&(O.u(),H=0),O.c(),H%2==0&&M.ah(),J.aj(),J.S.x>432+y.x&&J.S.x<F.w-v.w+432?(y.x-=J.S.vx,xxx=-J.S.vx):xxx=0,yyy=0,y.y-y.oY<-v.h&&J.S.y+y.oY+16*c>y.y+v.h&&J.S.vy>0?yyy=-J.S.vy:J.S.y-y.oY<y.y&&(J.S.vy<0?yyy=-J.S.vy:0==J.S.vy&&(yyy=Q-J.S.y)),y.y-=yyy,Q=J.S.y,r.translate(xxx,yyy),H++,requestAnimationFrame(t)}var e=document;e.get=e.getElementById;var i,f,o=e.get("c"),r=o.getContext("2d"),c=4,u=16,x=15,v={w:1024,h:720},y={x:0,y:-720,oY:250},S=(window.innerHeight-100)/v.h;o.width=v.w*S,o.height=v.h*S,r.scale(S,S),r.translate(y.x,-y.y);var l=[],h=[295,205,25,115],d=[],s=[],p=0,w={37:1,38:2,39:4,40:8,65:16,83:32,68:64,32:128};e.addEventListener("keydown",function(n){var a=n.keyCode?n.keyCode:n.which;w[a]&&(p|=w[a],n.preventDefault())}),e.addEventListener("keyup",function(n){var a=n.keyCode?n.keyCode:n.which;p&w[a]&&(p^=w[a],n.preventDefault())});var g=[[0,4,1,2],[1,0,2,4],[4,2,0,1],[2,1,4,0]],m=function(n){var a=this;a.afs=n,a.current=a.afs[0]},k=function(n,a,t,e,i,f){var o=this;o.x=n,o.y=a,o.vx=t,o.vy=e,o.size=i,o.ac=f,o.life=100,o.d=function(){return o.x+=o.vx,o.vy+=.2,o.y+=o.vy,o.size*=1,--o.life<0},o.ag=function(){r.fillStyle="hsla("+o.ac+","+o.life+"%, "+o.life+"%, "+o.life/100+")",r.fillRect(o.x,o.y,o.size,o.size)}},A="{f{g{h{i{u!$%056?@ABFORV`bcefostu~,",D='{H{I{X{Y"#$134ACEQSVacdsu~.~1~=~@~M~P~]~^~`~a',b='{I{J{Y{Z"#$134ACERSVcdsu~.~0~=~?~M~O~]~^~_~`',I='{Y{Z{i{j"#$134ACDESVWbcdqru~)~*~+~0~9~A~Q~a~b',V="{Z{[{g{h{i{j{k!#$134ACESTcesu~-~0~=~?~L~O~\\~_",z=["",'~A~>~0tqfUD2{i{h~@~=~1udVE1$#"{I{H',"B65VREA","~@~>tD2('&%{m{j{i~?~=udB651\"{J{I","~_~P~O~J~;~:~,tUB~b~a~Q~9~+~*~)uqWEA",'~`~M~?~>~=~/T2{k{[~P~J~A~;~:~0~,rdbVB1"{i{Y'],E={i:{kf:D,f:[0,0,0,0,0,0,0,0,0,1]},p:{kf:b,f:[2,3,3,2,0,-1]},r:{kf:I,f:[0,4,0,5,0,5,0,4,0]},j:{kf:V,f:[0]}},P=function(n){for(var a=new Int16Array(u),t=0;t<n.length;t++)a[n[t]>>4]|=1<<x-(15&n[t]);return a},j=function(n){var a=this;a.w=new Int16Array(u),a.D=n,a.ab=[],a.ad=0,a.ac="#000",a.x=0,a.y=-720,a.vx=0,a.vy=0,a.aa=1,a.p=0,a.w=P(a.D),a.maxVx=2.2*c,a.n=.25,a.e=0,a.hp=1,a.setPixelSize=function(n){a.e=n,a.height=a.width=16*a.e},a.setPixelSize(c),a.u=function(){for(var n=[],t=0;u>t;t++)for(var e=0;u>e;e++)a.w[t]&1<<x-e&&n.push(e*u+x-t);a.D=n,a.w=P(n)},a.addFrame=function(n){a.ab.push(P(n)),a.ad=a.ab.length-1},a.fall=function(){a.y+=a.vy,a.vy<0&&(a.p=0)},a.ah=function(){if(++a.ad>=a.ab.length&&(a.ad=0),"string"==typeof a.ab[a.ad])return a.o(a.ab[a.ad]);for(var n=[],t=0;u>t;t++){a.w[t]=a.w[t]^a.ab[a.ad][t];for(var e=0;u>e;e++)1<<x-e&a.w[t]&&n.push(t*u+e)}a.D=n},a.xi=function(){return a.x+5*a.e},a.xpi=function(){return a.x+a.e},a.xf=function(){return a.x+11*a.e},a.xpf=function(){return a.x+14*a.e},a.yi=function(){return a.y+2*a.e},a.yil=function(){return a.y+12*a.e},a.yf=function(){return a.y+16*a.e},a.b=function(n){a.vy+=n,a.vy>3*a.e&&(a.vy=3*a.e)},a.land=function(n){a.p||a.o("i"),a.vy=0,a.p=1,a.z=1,a.downed=0,a.y=n-15*a.e},a.l=function(){a.vx>0&&(a.vx=0),a.vx-=a.n,a.p&&a.o("r"),a.vx<-a.maxVx&&(a.vx=-a.maxVx),a.aa=0},a.h=function(){a.vx<0&&(a.vx=0),a.vx+=a.n,a.p&&a.o("r"),a.vx>a.maxVx&&(a.vx=a.maxVx),a.aa=1},a.forward=function(){a.aa?a.h():a.l()},a.turn=function(){a.aa=!a.aa},a.g=function(){0!=a.vx&&(a.vx=0,a.o("i"))},a.ak=function(){(a.p||a.z)&&(a.vy=3*-a.e,a.p||(a.z=0),a.p=0,a.o("j"))},a.d=function(){a.fall(),a.x+=a.vx},a.c=function(){a.x+=a.vx},a.dY=function(){a.y+=a.vy},a.ag=function(){r.fillStyle=a.ac;for(var n=0;n<a.D.length;n++){var t=15&a.D[n];r.fillRect(a.x+(a.aa?t:15-t)*a.e,a.y+(a.D[n]>>4)*a.e,a.e,a.e)}},a.o=function(n){if(a.t!=n){a.t=n,a.ab=[];var t=E[n].f;for(a.w=P(q(E[n].kf)),f=0;f<t.length;f++){var e=z[t[f]];if(-1==t[f])return a.ad=a.ab.length,a.ab.push("i");a.addFrame(q(e))}}},a.hit=function(n){return a.hp-=n,a.hp<0}},q=function(n){for(var a=0,t=n[a],e=[];t;){var i=85;"{"==t[0]&&(t=n[++a],i=0),"~"==t[0]&&(t=n[++a],i=170),e.push(t.charCodeAt()+i-33),t=n[++a]}return e},C=function(n,a,t){var e=this;e.x=n,e.y=a,e.width=t,e.collide=1,e.v=function(n){(n.xi()>e.x&&n.xi()<e.x+e.width||n.xf()>e.x&&n.xf()<e.x+e.width||n.xi()<e.x&&n.xf()>e.x+e.width)&&e.y>n.yil()&&e.y+5<n.yf()&&n.vy>=0?(e.collide=1,n.land(a)):e.collide=0},e.ag=function(){r.fillRect(e.x,e.y,e.width,5)}},Y=[],R=function(){var n=this;n.w=1500,n.h=0;var a=20;n.generateLevel=function(){Y=[];for(var t=0;t<=n.w;t+=a){var e=t%(2*Math.PI),i=-10*Math.sin(e);n.h=i<n.h?i:n.h,Y.push(new C(t,i,a))}},n.generateLevel(),n.ag=function(){var n=~~(-y.x/a);0>n&&(n=0);var t=n+~~(v.w/a);for(t>=Y.length&&(t=Y.length-1),r.fillStyle="#A4A",i=n;t>=i;i++)Y[i].ag()},n.v=function(n){var t=~~(n.xi()/a)-1;0>t&&(t=0);var e=~~(n.xf()/a)+1;for(e>=Y.length&&(e=Y.length-1),i=t;e>=i;i++)Y[i].v(n)},n.agLevel=function(){}},B=function(n){var t=this;t.type=n,0==t.type&&(t.D=q(A)),1==t.type&&(t.D=q(A)),2==t.type&&(t.D=q(A)),3==t.type&&(t.D=q(A)),t.S=new j(t.D),t.ai=0,t.ac=J.s,t.S.ac="hsl("+t.ac+",100%, 50%)",t.S.x=M.x+24,t.S.y=M.y,t.S.setPixelSize(2),t.S.vx=M.aa?10:-10,t.S.aa=M.aa,t.damage=1,t.v=function(){for(var n=d.length-1;n>=0;n--){var e=d[n].S;(e.xpi()>t.S.xpi()&&e.xpi()<t.S.xpf()||e.xpf()>t.S.xpi()&&e.xpf()<t.S.xpf())&&t.S.y>e.y&&t.S.y<e.yf()&&(d[n].hit(t.type,t.damage),t.del=1,a(t.S,2,t.S.vx/2,-3,t.ac))}},t.d=function(){t.S.c(),t.S.dY(),t.ai=t.S.x>F.w||t.S.x<-10},t.ah=function(){0==t.type&&t.S.u(),1==t.type&&t.S.u()}},L=function(t,e){var i=this;i.S=e,i.ac=h[t],i.S.ac="hsl("+i.ac+",100%, 50%)",i.S.o("i"),i.S.setPixelSize(6),i.f=10,i.w=0,i.a=0,i.e=0,i.S.maxVx=.9*M.maxVx,i.S.x=300,i.skills=new m([t]),i.actionpipe="",i.setActionPipe=function(n){for(var a="",t=0;t<n.length;t++){var e=n[t],f=parseInt(n.substring(t+1,t+4));if(f){t+=(""+f).length;for(var o=0;f>o;o++)a+=e}else a+=e}i.actionpipe=a},i.setActionPipe("ljdw10jdstw10"),i.actionIndex=0,i.actions={f:i.S.forward,t:i.S.turn,j:i.S.ak,m:function(){},a:i.attack1,b:i.attack2,c:i.attack3,s:i.S.g,w:function(){},l:function(){i.S.p||i.actionIndex--},d:function(){i.S.p?i.S.g():(i.actionIndex--,i.S.forward())}},i.follow=function(){i.S.x<M.x?i.S.h():i.S.l()},i.away=function(){i.S.x<M.x&&i.S.x>0?i.S.l():i.S.x>M.x&&i.S.x+16*i.S.e<F.w?i.S.h():i.S.g()},i.amAction=function(){var n=i.actionpipe[i.actionIndex];i.actions[n](),++i.actionIndex>=i.actionpipe.length&&(i.actionIndex=0)},i.d=function(){i.amAction(),i.S.d()},i.hit=function(t,e){i.S.hit(n(t,i.skills.current,e))&&(i.del=1,a(i.S,e,0,0,i.ac),d.push(new L(~~(4*Math.random()),new j(q(D)))))}},M=new j(q(D));M.o("i");var $=function(n){var a=this;a.S=n,a.S.setPixelSize(5),a.af=2,a.q=16,a.s=h[a.af],a.S.ac="hsl("+a.s+",100%, 50%)",a.r=0,a.down=0,a.up=0,a.am=function(){++a.af>3&&(a.af=0),a.r=5,p-=64},a.prev=function(){--a.af<0&&(a.af=3),p-=16,a.r=-5},a.an=function(){if(a.q<=0){a.S.o("p");var n=new B(a.af,2);a.down&&(n.S.vy=7),a.up&&(n.S.vy=-7),l.push(n),a.q=16}},a.d=function(){a.S.d(),a.s+=a.r,a.s<0&&(a.s=355),a.s>355&&(a.s=5),a.s!=h[a.af]?a.S.ac="hsl("+a.s+",100%, 50%)":a.r=0,--a.q<0&&(a.q=0)},a.aj=function(){64&p&&a.am(),16&p&&a.prev(),a.down=8&p?1:0,a.up=2&p?1:0,128&p&&(a.S.ak(),p^=128),32&p&&a.an(),1&p&&a.S.x>-16?a.S.l():4&p&&a.S.x+16*c<F.w?a.S.h():a.S.g()}},F=new R,J=new $(M),O=new j(q(A));O.ac="#E60",O.e=4,d.push(new L(1,new j(q(D))));var H=0,Q=J.S.y;requestAnimationFrame(t)}();